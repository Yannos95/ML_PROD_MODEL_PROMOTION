<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Model Stage Demo</title>
</head>
<body>
    <h1>Model Promotion Demo</h1>
    <p>Calls /health and /predict on the backend.</p>
    
    <button id="health">Check Health</button>
    <pre id="healthOut"></pre>
    
    <button id="predict">Send Predict</button>
    <pre id="predOut"></pre>
    
    <script>
        const backend = "http://localhost:8000";

        document.getElementById("health").onclick = async () => {
            try {
                const r = await fetch(`${backend}/health`);
                const data = await r.json();
                document.getElementById("healthOut").textContent = JSON.stringify(data, null, 2);
            } catch (e) {
                document.getElementById("healthOut").textContent = "Error connecting to backend.";
            }
        };

        document.getElementById("predict").onclick = async () => {
            const payload = { 
                features: [[0.1, 0.2, 0.0, 0.4, 0.5, 0.0, 0.2, 0.1, 0.3, 0.9]] 
            };
            
            try {
                const r = await fetch(`${backend}/predict`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload),
                });
                const data = await r.json();
                document.getElementById("predOut").textContent = JSON.stringify(data, null, 2);
            } catch (e) {
                document.getElementById("predOut").textContent = "Error calling predict.";
            }
        };
    </script>
</body>
</html>